<!DOCTYPE html>
<head>
<style>
* {
  box-sizing: border-box;
}

.img-with-text {
  text-align: center;
}

.column {
  float: left;
  width: 25%;
  padding: 5px;
  text-align: center;
}

.column5 {
  float: left;
  width: 20%;
  padding: 5px;
  text-align: center;
}

/* Clearfix (clear floats) */
.row::after {
  content: "";
  clear: both;
  display: table;
}
</style>
</head>

<center><h1>Project 1: Fun with Filters and Frequencies!</h1></center>
<h2>Part 1.1: Finite Difference Operator</h2>
<p>Let Dx=[1 -1], Dy=[1 -1].T. The partial derivative of the image with respect to x is found by convoluting the image with Dx. The partial derivative of the image with respect to y is found by convoluting the image with Dy. The gradient magnitude is found by taking the square root of the sum of the squares of both partial derivatives.</p>
<div class="img-with-text">
  <img src="./gradients/cameraman.png">
  <p> cameraman.png </p>
</div>
<div class="row">
  <div class="column">
    <img src="./gradients/gradx.png" style="width:100%">
    <p> Gradient w.r.t x </p>
  </div>
  <div class="column">
    <img src="./gradients/grady.png" style="width:100%">
    <p> Gradient w.r.t y </p>
  </div>
  <div class="column">
    <img src="./gradients/gradmagnoisy.png" style="width:100%">
    <p> Magnitude of Gradient unfiltered </p>
  </div>
  <div class="column">
    <img src="./gradients/gradmagfiltered.png" style="width:100%">
    <p> Magnitude of Gradient filtered (> 0.28) </p>
  </div>
</div>

<h2>Part 1.2: Derivative of Gaussian (DoG) Filter</h2>
<p>The Gaussian filter hass size=12 and sigma=2. Image after blurring:</p>
<div class="img-with-text">
  <img src="./gradients/cameramanblur.png">
  <p> blurred cameraman.png with gaussian filter</p>
</div>
<p>Two Convolutions:</p>
<div class="row">
  <div class="column">
    <img src="./gradients/gausstwox.png" style="width:100%">
    <p> Gradient w.r.t x </p>
  </div>
  <div class="column">
    <img src="./gradients/gausstwoy.png" style="width:100%">
    <p> Gradient w.r.t y </p>
  </div>
  <div class="column">
    <img src="./gradients/gausstwonoisy.png" style="width:100%">
    <p> Magnitude of Gradient unfiltered </p>
  </div>
  <div class="column">
    <img src="./gradients/gausstwofiltered.png" style="width:100%">
    <p> Magnitude of Blurred Gradient filtered (> 0.03) </p>
  </div>
</div>
<p>Already we can see that the edges are clearer and the picture overall has less noise because of the initial blurring with the Gaussian filter.</p>
<p>Below is the single convolution method, done by taking the derivative of the filter w.r.t x and y, and then convoluting the image with the resulting DoG filter:</p>
<div class="row">
  <div class="column">
    <img src="./gradients/gaussonex.png" style="width:100%">
    <p> Gradient w.r.t x </p>
  </div>
  <div class="column">
    <img src="./gradients/gaussoney.png" style="width:100%">
    <p> Gradient w.r.t y </p>
  </div>
  <div class="column">
    <img src="./gradients/gaussonenoisy.png" style="width:100%">
    <p> Magnitude of Gradient unfiltered </p>
  </div>
  <div class="column">
    <img src="./gradients/gaussonefiltered.png" style="width:100%">
    <p> Magnitude of Blurred Gradient filtered (> 0.03) </p>
  </div>
</div>
<p>The final filtered images of both methods look the same, as expected.</p>

<h2>Part 1.3: Image Straightening</h2>
<div class="row">
  <div class="column">
    <img src="./rotation/facade.png" style="width:100%">
    <p> facade.png (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/facade_rotated.png" style="width:100%">
    <p> facade.png (rotated -4 degrees) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_facade_before.png" style="width:100%">
    <p> facade.png histogram (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_facade_after.png" style="width:100%">
    <p> facade.png histogram (rotated -4 degrees) </p>
  </div>
</div>

<div class="row">
  <div class="column">
    <img src="./rotation/basketball.png" style="width:100%">
    <p> basketball.png (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/basketball_rotated.png" style="width:100%">
    <p> basketball.png (rotated 14 degrees) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_basketball_before.png" style="width:100%">
    <p> basketball.png histogram (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_basketball_after.png" style="width:100%">
    <p> basketball.png histogram (rotated 14 degrees) </p>
  </div>
</div>

<div class="row">
  <div class="column">
    <img src="./rotation/taipei.png" style="width:100%">
    <p> taipei.png (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/taipei_rotated.png" style="width:100%">
    <p> taipei.png (rotated -10 degrees) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_taipei_before.png" style="width:100%">
    <p> taipei.png histogram (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_taipei_after.png" style="width:100%">
    <p> taipei.png histogram (rotated -10 degrees) </p>
  </div>
</div>

 <div class="row">
  <div class="column">
    <img src="./rotation/homerchu.png" style="width:100%">
    <p> homerchu.png (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/homerchu_rotated.png" style="width:100%">
    <p> homerchu.png (rotated 7 degrees) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_homerchu_before.png" style="width:100%">
    <p> homerchu.png histogram (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_homerchu_after.png" style="width:100%">
    <p> homerchu.png histogram (rotated 7 degrees) </p>
  </div>
</div>

<p>The straightening algorithm fails to straighten the bottom picture most likely because the most distinctive lines (the different colored flowers) should not actually be straight. The algorithm tries to straighten these lines, which results in a originally straight picture now rotated.</p>
 <div class="row">
  <div class="column">
    <img src="./rotation/sapporo.png" style="width:100%">
    <p> sapporo.png (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/sapporo_rotated.png" style="width:100%">
    <p> sapporo.png (rotated 19 degrees) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_sapporo_before.png" style="width:100%">
    <p> sapporo.png histogram (original) </p>
  </div>
  <div class="column">
    <img src="./rotation/hist_sapporo_after.png" style="width:100%">
    <p> sapporo.png histogram (rotated 19 degrees) </p>
  </div>
</div>

<h2>Part 2.1: Image "Sharpening"</h2>
The images below have been sharpened by the following: img + alpha * img * (I - G), where G is the gaussian filter with size=11 and sigma=3, I is the unit impulse, and alpha=2.
 <div class="row">
  <div class="column">
    <img src="./sharpen/taj.png" style="width:100%">
    <p> taj.png (original) </p>
  </div>
  <div class="column">
    <img src="./sharpen/taj_sharp.png" style="width:100%">
    <p> taj.png (sharpened) </p>
  </div>
</div>
<div class="row">
  <div class="column">
    <img src="./sharpen/nomos.png" style="width:100%">
    <p> nomos.png (original) </p>
  </div>
  <div class="column">
    <img src="./sharpen/nomos_sharp.png" style="width:100%">
    <p> nomos.png (sharpened) </p>
  </div>
</div><div class="row">
  <div class="column">
    <img src="./sharpen/pencil.png" style="width:100%">
    <p> pencil.png (original) </p>
  </div>
  <div class="column">
    <img src="./sharpen/pencil_sharp.png" style="width:100%">
    <p> pencil.png (sharpened) </p>
  </div>
</div>
Below is an example of blurring a photo and then sharpening it.
 <div class="row">
  <div class="column">
    <img src="./sharpen/yosemite.png" style="width:100%">
    <p> yosemite.png (original) </p>
  </div>
  <div class="column">
    <img src="./sharpen/yosemite_blurred.png" style="width:100%">
    <p> yosemite.png (blurred) </p>
  </div>
  <div class="column">
    <img src="./sharpen/yosemite_sharpened.png" style="width:100%">
    <p> yosemite.png (sharpened) </p>
  </div>
  <div class="column">
    <img src="./sharpen/yosemite.png" style="width:100%">
    <p> yosemite.png (original) </p>
  </div>
</div>

<h2>Part 2.2: Hybrid Images</h2>
<p>Grayscale Images:</p>
 <div class="row">
  <div class="column">
    <img src="./hybrid/nutmeg.png" style="width:100%">
    <p> nutmeg.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/DerekPicture.png" style="width:100%">
    <p> DerekPicture.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/nutmeg-derek.png" style="width:100%">
    <p> nutmeg-derek.png (hybrid) </p>
  </div>
</div>
 <div class="row">
  <div class="column">
    <img src="./hybrid/sanders.png" style="width:100%">
    <p> sanders.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/trump.png" style="width:100%">
    <p> trump.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/sanders-trump.png" style="width:100%">
    <p> sanders-trump.png (hybrid) </p>
  </div>
</div>
<div class="row">
  <div class="column">
    <img src="./hybrid/tree_two.png" style="width:100%">
    <p> tree_two.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/tree_one.png" style="width:100%">
    <p> tree_one.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/tree-blend.png" style="width:100%">
    <p> tree-blend.png (hybrid) </p>
  </div>
</div>
 <div class="row">
  <div class="column">
    <img src="./hybrid/mic.png" style="width:100%">
    <p> mic.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/dandelion.png" style="width:100%">
    <p> dandelion.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/mic-dandelion.png" style="width:100%">
    <p> mic-dandelion.png (hybrid) </p>
  </div>
</div>
<p> Failure Case: (SF and NYC skylines). I think this failed because there are a lot of small and indistinct edges from the buildings. Also for the NYC skyline, a lot of the buildings are glass, which reflects the color of the sky and makes the edge between them less distinctive. The blurring effect thus looks stronger and when the two skylines are combined only the high frequency lines are seen. </p>
<div class="row">
  <div class="column">
    <img src="./hybrid/sf.png" style="width:100%">
    <p> sf.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/newyork.png" style="width:100%">
    <p> newyork.png (original) </p>
  </div>
  <div class="column">
    <img src="./hybrid/sf-newyork.png" style="width:100%">
    <p> sf-newyork.png (hybrid) </p>
  </div>
</div>
<p>FFT Analysis: (sanders + trump)</p>
 <div class="row">
  <div class="column5">
    <img src="./hybrid/sanders-gray.png" style="width:100%">
  </div>
  <div class="column5">
    <img src="./hybrid/trump-gray.png" style="width:100%">
  </div>
  <div class="column5">
    <img src="./hybrid/sanders-high.png" style="width:100%">
  </div>
  <div class="column5">
    <img src="./hybrid/trump-high.png" style="width:100%">
  </div>
  <div class="column5">
    <img src="./hybrid/sanders-trump.png" style="width:100%">
  </div>
</div>
<div class="row">
  <div class="column5">
    <img src="./hybrid/sandersfft.png" style="width:100%">
    <p> Sanders (grayscale) frequency </p>
  </div>
  <div class="column5">
    <img src="./hybrid/trumpfft.png" style="width:100%">
    <p> Trump (grayscale) frequency</p>
  </div>
  <div class="column5">
    <img src="./hybrid/sandershighfft.png" style="width:100%">
    <p> Sanders frequency (high freq only) </p>
  </div>
  <div class="column5">
    <img src="./hybrid/trumplowfft.png" style="width:100%">
    <p> Trump frequency (low freq only) </p>
  </div>
  <div class="column5">
    <img src="./hybrid/hybridfft.png" style="width:100%">
    <p> Hybrid frequency </p>
  </div>
</div>
<p>Bells and Whistles: (colored images). There is just a subtle difference when adding the color for the high frequency portion. I think the having color for both images looks the best.</p>
<div class="row">
  <div class="column">
    <img src="./hybrid/nutmeg-derek.png" style="width:100%">
    <p> nutmeg-derek.png </p>
  </div>
  <div class="column">
    <img src="./hybrid/nutmeg-derek-nutmeg-color.png" style="width:100%">
    <p> nutmeg-derek-nutmeg-color.png </p>
  </div>
  <div class="column">
    <img src="./hybrid/nutmeg-derek-derek-color.png" style="width:100%">
    <p> nutmeg-derek-derek-color.png </p>
  </div>
  <div class="column">
    <img src="./hybrid/nutmeg-derek-full-color.png" style="width:100%">
    <p> nutmeg-derek-full-color.png </p>
  </div>
</div>
<div class="row">
  <div class="column">
    <img src="./hybrid/sanders-trump.png" style="width:100%">
    <p> sanders-trump.png </p>
  </div>
  <div class="column">
    <img src="./hybrid/sanders-trump-sanders-color.png" style="width:100%">
    <p> sanders-trump-sanders-color.png </p>
  </div>
  <div class="column">
    <img src="./hybrid/sanders-trump-trump-color.png" style="width:100%">
    <p> sanders-trump-trump-color.png </p>
  </div>
  <div class="column">
    <img src="./hybrid/sanders-trump-full-color.png" style="width:100%">
    <p> sanders-trump-full-color.png </p>
  </div>
</div>

<h2>Part 2.3: Gaussian and Laplacian Stacks</h2>
<p>Each top row shows the gaussian stack for sigma=1,2,4,8,16 and size=2*sigma. The bottom row shows the corresponding laplacian stack of the iamge.</p>
<center>
<p> lincoln.png </p>
<img src="./stacks/lincoln.png" style="width:70%">
<p> monalisa.png </p>
<img src="./stacks/monalisa.png" style="width:70%">
<p> sanders-trump.png </p>
<img src="./stacks/sanders-trump.png" style="width:70%">
</center>
 
<h2>Part 2.4: Multiresolutional Blending + Bells and Whistles </h2>
  <p> Each blended image has the two original images on the left, followed by the laplacian stack of the first image weighted by the gaussian stack of the mask (top row), the laplacian stack of the second image weighted by the gaussian stack of the mask (middle row), followed by combination of the top and middle row (bottom row). The final blended image is right below.</p> 
<center>
<p>The following images are blended using a vertical mask: </p>
<img src="./blend/vmask.png" style="width:20%" border="5">
<p> Oraple </p>
<img src="./blend/oraple_stack.png" style="width:70%">
<img src="./blend/oraple.png" style="width:40%">
<p> Soon </p>
<img src="./blend/soon_stack.png" style="width:70%">
<img src="./blend/soon.png" style="width:40%">
<p> Kueen </p>
<img src="./blend/kueen_stack.png" style="width:70%">
<img src="./blend/kueen.png" style="width:40%">
<p> The images below are blended using an irregular mask: </p>
<img src="./blend/mario-mask.png" style="width:20%">
<p> Mario in NYC </p>
<img src="./blend/mario_stack.png" style="width:70%">
<img src="./blend/mario-nyc.png" style="width:40%">
</center>

<h2>Reflection</h2>
The most interesting thing I learned from this project was the process of blending images. It was really cool being able to see how the images looked at each layer of the stack, which also helped me understand why the blended image looks so natural. 


